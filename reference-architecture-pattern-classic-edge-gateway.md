---

copyright:
  years: 2024, 2024
lastupdated: "2024-06-17"

subcollection: pattern-classic-edge-gateway

keywords: network, VPC, PowerVS, Classic edge gateway

authors:
- name: Vickie Hooper

# The release that the reference architecture describes
version: 1.0

# Use if the reference architecture has deployable code.
# Value is the URL to land the user in the IBM Cloud catalog details page for the deployable architecture.
# See https://test.cloud.ibm.com/docs/get-coding?topic=get-coding-deploy-button
# deployment-url:

docs: /docs/pattern-sap-on-powervs

content-type: reference-architecture

---

{{site.data.keyword.attribute-definition-list}}

# Reference Architecture
{: #reference-architecture}

This reference architecture is used to force all network traffic to flow through the classic firewall or gateway appliance for inspection before it is allowed to the downstream workloads within {{site.data.keyword.cloud_notm}}.

## Architecture diagram
{: #architecture-diagram}

This architecture will describe on-premises data center(s) connectivity into {{site.data.keyword.cloud_notm}} Classic, with workloads in classic, PowerVS, and VPC. The diagram includes examples to show where workload compute instances, proxy servers and jump servers would reside. Within the diagram, there are identifying numbers indicating key components in the description below.

![Illustrates Classic edge gateway solution architecture](image/classic-edge.svg){: caption="Figure 1. Classic edge gateway solution architecture" caption-side="bottom"}


1.  Client network connectivity from on-premises using redundant Direct Links.
2.  The gateway provides routing and security functions.
3.  An optional network path is accomplished through a site-to-site VPN terminated on Classic Gateway.
4.  Power Virtual Server workspace with Power Edge Router (PER), subnets, and resources.
5.  The GREa tunnel allows BYOIP to be advertised between Classic and on-premises.
6.  The GREb tunnel allows BYOIP to be advertised between Classic and the PowerVS and VPC environments.
7.  The GREc tunnel allows BYOIP to be advertised between Classic environments in separate regions.
8.  Virtual Bastion host for remote administrative access.
9.  DNS services.
10. A proxy Server is used as an intermediary between on-prem and cloud services.
11. Cloud Internet Services (CIS) is used to enhance the security, performance, and reliability of internet-facing applications and websites.
12. A compute Instance in Virtual Private Cloud.
13. A Virtual Private Endpoint for VPC.
14. An Application load balancer.

## Design scope
{: #design-scope}

Following the [{{site.data.keyword.arch_framework}}](/docs/architecture-framework?topic=architecture-framework-taxonomy), the Classic edge gateway network pattern covers design considerations and architecture decisions for the following aspects and domains:

- **Compute:** Virtual Servers
- **Networking:** Enterprise Connectivity, BYOIP/Edge Gateways, Network Segmentation, Cloud Native Connectivity, Load Balancing, and DNS
- **Security:** Identity and Access Management (IAM)
- **Resiliency:** High Availability, Disaster Recovery
- **Service management:** Monitoring, Logging, Auditing, Alerting, Event Management

![illustrates a detailed network and component architecture for a Classic edge gateway solution architecture](image/Heat-map.svg){: caption="Figure 2. Classic edge gateway design scope" caption-side="bottom"}

The Architecture Framework provides a consistent approach to design cloud solutions by addressing requirements across a set of "aspects" and "domains", which are technology-agnostic architectural areas that need to be considered for any enterprise solution. See [Introduction to the {{site.data.keyword.arch_framework}}](/docs/architecture-framework?topic=architecture-framework-intro) for more details.

## Requirements
{: #requirements}

The following represents a baseline set of requirements that are applicable to most clients and critical to a successful classic edge gateway network deployment.

| Aspect         | Requirement                                                                                                                                                                                                                                                                                      |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Compute            | Secure remote administrative support of all devices within the {{site.data.keyword.cloud_notm}} environment.                                                                                                                                                                                                                |
| Network            | Private enterprise connectivity from customer data centers to {{site.data.keyword.cloud_notm}} for access to applications, data, and services.                                                                                                                                                                              |
|                    | Private administrative and management connectivity.                                                                                                                                                                                                                                                  |
|                    | Provide network isolation with the ability to separate applications based on attributes such as data classification, public versus private traffic flows, and internal application function.                                                                                                         |
|                    | Provide the ability to use Bring Your Own IP (BYOIP)                                                                                                                                                                                                                                                 |
| Security           | Firewalls must be restrictively configured to provide advanced security features and prevent all traffic, both inbound and outbound, except that which is required, documented, and approved and optionally include Intrusion Protection System (IPS) and Intrusion Detection System (IDS) services. |
|                    | Distributed Denial of Service (DDoS) and Web Application Firewall (WAF) security capabilities required                                                                                                                                                                                               |
|                    | Secure access for administration and management of the environment                                                                                                                                                                                                                                   |
| Resiliency         | Multi-region capability to support a disaster recovery strategy and solution that allows all production applications to be included by using cloud infrastructure disaster recovery strategies.                                                                                                      |
| Service management | Provide health and system monitoring with ability to monitor and correlate performance metrics and events and provide alerting across applications and infrastructure.                                                                                                                               |
|                    | Ability to diagnose issues and exceptions and identify error source                                                                                                                                                                                                                                  |
{: caption="Table 1. Classic edge gateway requirements"}

## Components
{: #components}

| Aspect             | Component                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | How the component is used                                                                                                                   |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| Compute                | [Virtual Server on Classic](/docs/virtual-servers?topic=virtual-servers-about-virtual-servers)  \n - Bastion Host                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | The bastion host is deployed on a virtual server instance within classic and is used for remote administrative support.                         |
|                        | [Virtual Server on Classic](/docs/virtual-servers?topic=virtual-servers-about-virtual-servers)  \n - Proxy Server                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Acts as an intermediary between the on-premises network and {{site.data.keyword.cloud_notm}} services.                                                                 |
| Networking             | Virtual Private Network (VPN)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Provides a secured connection into {{site.data.keyword.cloud_notm}} over the Internet. VPN can be used for migrations, administrative access, and backup connectivity. |
|                        | [Gateway Appliance in Classic](/docs/gateway-appliance?topic=gateway-appliance-getting-started-ga)  \n - [{{site.data.keyword.vsrx}}](/docs/vsrx?topic=vsrx-getting-started)  \n -  [{{site.data.keyword.vra}}](/docs/virtual-router-appliance?topic=virtual-router-appliance-getting-started-vra)  \n - [FortiGate FSA 10 Gbps](/docs/fortigate-10g?topic=fortigate-10g-getting-started)  \n - [FortiGate vFSA](/docs/vfsa?topic=vfsa-getting-started)  \n - Bring Your Own Gateway ([BYOG](/docs/gateway-appliance?topic=gateway-appliance-order-byoa))  \n Bare Metal (including Checkpoint, Cisco, Palo Alto) | Provides router, firewall, and VPN gateway functions for secure and reliable connectivity to cloud resources.                                   |
|                        | Generic Routing Encapsulation (GRE) tunnels                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Supports Bring Your Own IP (BYOIP) communication between on-premise, Classic Infrastructure, and PowerVS.                                       |
|                        | [{{site.data.keyword.dl_short}}](/docs/dl?topic=dl-get-started-with-ibm-cloud-dl)  \n - Direct Link Connect                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Connect on-premise networks to the {{site.data.keyword.cloud_notm}} using physical telco connections or virtual exchange services.                                     |
|                        | [Load Balancers](/docs/vpc?topic=vpc-nlb-vs-elb)  \n - Application load balancer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Application Load Balancing for web servers, app servers, and database servers                                                                   |
|                        | [Private Service Endpoints](/docs/account?topic=account-vrf-service-endpoint&interface=ui#use-service-endpoint)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Connect directly to cloud services without using the public network                                                                             |
|                        | [{{site.data.keyword.cis_short}}](/docs/cis?topic=cis-getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Public Load balancing of web server traffic across regions                                                                                      |
|                        | [DNS Services](/docs/dns-svcs?topic=dns-svcs-about-dns-services)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | The Domain Name System (DNS) to associate human-friendly domain names with IP addresses                                                         |
| Security           | [IAM](/docs/account?topic=account-cloudaccess)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | IBM Cloud Identity & Access Management                                                                                                          |
|                        | [{{site.data.keyword.cis_short}}](/docs/cis?topic=cis-getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | DDoS protection and Web Application Firewall (WAF) for public connectivity                                                                      |
|                        | [Gateway Appliance in Classic](/docs/gateway-appliance?topic=gateway-appliance-getting-started-ga)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Advanced firewall capabilities such as Intrusion Detection System (IDS) and Intrusion Protection System (IPS) services.                         |
|                        | Bastion Host                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | The Bastion Host is deployed on a virtual server instance within classic and will be used for remote administrative support                     |
| Resiliency         | Multi-Region Deployment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Allows for disaster recovery in secondary region                                                                                                |
|                        | Multiple {{site.data.keyword.dl_short}} connections                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Allows for network resiliency for failover & recovery                                                                                           |
| Service management | Health Dashboard                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Apps and operational monitoring                                                                                                                 |
|                        | [IBM Cloud monitoring](/docs/monitoring?topic=monitoring-getting-started#getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Used to gain operational visibility into the performance and health of your applications, services, and platforms.                              |
|                        | [IBM Cloud Log Analysis](/docs/log-analysis?topic=log-analysis-getting-started#getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Used to manage operating system logs, application logs, and platform logs in the {{site.data.keyword.cloud_notm}}                                                      |
|                        | [IBM Cloud Activity Tracker](/docs/activity-tracker?topic=activity-tracker-getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Used to capture and monitor activities in your {{site.data.keyword.cloud_notm}} account                                                                                |
|                        | [IBM Cloud Logs](/docs/cloud-logs?topic=cloud-logs-getting-started)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Logging service providing users with capabilities for querying, tailing, and visualizing logs.                                                  |
{: caption="Table 2. Classic edge gateway solution components"}
